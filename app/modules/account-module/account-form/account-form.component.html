<form name="formAccount" ng-submit="$scope.submitForm()">
    <div class="form-group row">
        <label for="username" class="col-md-5 col-form-label" ng-class="$scope.labelColorClass">Tên đăng nhập</label>
        <div class="col-md-7">
            <div class="input-group">
                <div class="input-group-prepend">
                    <div class="input-group-text border border-secondary text-dark bg-primary">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
                <input ng-readonly="$scope.state == $scope.UPDATE_STATE" required pattern="^[a-zA-Z0-9_]+$" minlength=3 maxlength=40 type="text" class="form-control bg-dark text-light border border-secondary" name="username" ng-model="$scope.account.username">
            </div>
            <span class="text-danger" ng-show="formAccount.username.$error && formAccount.username.$dirty" ng-messages="formAccount.username.$error" role="alert">
                <span ng-message="pattern">Tên đăng nhập không chứa ký tự đặc biệt trừ dấu _.</span>
                <span ng-message="required">Vui lòng nhập tên đăng nhập.</span>
                <span ng-message="minlength">Tên đăng nhập gồm 3 đến 40 ký tự.</span>
            </span>
        </div>
    </div>
    <div class="form-group row" ng-if="$scope.state == $scope.UPDATE_STATE">
        <label for="change-password" class="col-md-5 col-form-label" ng-class="$scope.labelColorClass">Mật khẩu</label>
        <div class="col-md-7">
            <div class="input-group">
                <div class="input-group-prepend">
                    <div class="input-group-text border border-secondary text-dark bg-primary">
                        <i class="fas fa-lock"></i>
                    </div>
                </div>
                <div data-toggle="modal" data-target="#modal-change-password" style="cursor: pointer;" class="form-control btn btn-outline-primary rounded">Đổi mật khẩu</div>
            </div>
        </div>
    </div>
    <div class="form-group row" ng-if="$scope.state == $scope.REGISTER_STATE">
        <label for="password" class="col-md-5 col-form-label" ng-class="$scope.labelColorClass">Mật khẩu</label>
        <div class="col-md-7">
            <div class="input-group">
                <div class="input-group-prepend">
                    <div class="input-group-text border border-secondary text-dark bg-primary">
                        <i class="fas fa-lock"></i>
                    </div>
                </div>
                <input required pattern="^[a-zA-Z0-9\s\u002D\u005F]+$" minlength=5 maxlength=40 type="password" autocomplete="new-password" class="form-control bg-dark text-light border border-secondary" name="password" ng-model="$scope.account.password">
            </div>
            <span class="text-danger" ng-show="formAccount.password.$error && formAccount.password.$dirty" ng-messages="formAccount.password.$error" role="alert">
                <span ng-message="pattern">Mật khẩu chỉ gồm ký tự chữ cái và -, _, dấu cách.</span>
                <span ng-message="required">Vui lòng nhập mật khẩu.</span>
                <span ng-message="minlength">Mật khẩu ít nhất 5 đến 40 ký tự</span>
            </span>
        </div>
    </div>
    <div class="form-group row" ng-if="$scope.state == $scope.REGISTER_STATE">
        <label for="passwordConfirm" class="col-md-5 col-form-label" ng-class="$scope.labelColorClass">Xác nhận mật khẩu</label>
        <div class="col-md-7">
            <div class="input-group">
                <div class="input-group-prepend">
                    <div class="input-group-text border border-secondary text-dark bg-primary">
                        <i class="fas fa-lock"></i>
                    </div>
                </div>
                <input required pattern="^[a-zA-Z0-9\s\u002D\u005F]+$" minlength=5 maxlength=40 type="password" autocomplete="new-password" class="form-control bg-dark text-light border border-secondary" compare-to="$scope.account.password" name="passwordConfirm" ng-model="$scope.passwordConfirm">
            </div>
            <span class="text-danger" ng-show="formAccount.passwordConfirm.$error && formAccount.passwordConfirm.$dirty" ng-messages="formAccount.passwordConfirm.$error" role="alert">
                <span ng-message="pattern">Mật khẩu chỉ gồm ký tự chữ cái và -, _, dấu cách.</span>
                <span ng-message="required">Vui lòng nhập lại mật khẩu.</span>
                <span ng-message="minlength">Mật khẩu ít nhất 5 đến 40 ký tự</span>
                <span ng-message="compareTo">Chưa khớp mật khẩu</span>
            </span>
        </div>
    </div>
    <div class="form-group row">
        <label for="fullName" class="col-md-5 col-form-label" ng-class="$scope.labelColorClass">Họ tên</label>
        <div class="col-md-7">
            <div class="input-group">
                <div class="input-group-prepend">
                    <div class="input-group-text border border-secondary text-dark bg-primary">
                        <i class="fas fa-sticky-note"></i>
                    </div>
                </div>
                <input required pattern="^[a-zA-ZÀÁÂÃÈÉÊẾÌÍÒÓÔÕÙÚĂĐĨŨƠàáâãèéêìíòóôõùúăđĩũơƯĂẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼỀỀỂưăạảấầẩẫậắằẳẵặẹẻẽềếểệỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪễệỉịọỏốồổỗộớờởỡợụủứừỬỮỰỲỴÝỶỸửữựỳỵỷỹ\s]+$" minlength=5 maxlength=40 type="text" class="form-control bg-dark text-light border border-secondary" name="fullName" ng-model="$scope.account.fullName">
            </div>
            <span class="text-danger" ng-show="formAccount.fullName.$error && formAccount.fullName.$dirty" ng-messages="formAccount.fullName.$error" role="alert">
                <span ng-message="pattern">Họ tên chỉ gồm ký tự chữ cái và dấu cách.</span>
                <span ng-message="required">Vui lòng nhập họ tên.</span>
                <span ng-message="minlength">Họ tên ít nhất 5 đến 40 ký tự</span>
            </span>
        </div>
    </div>
    <div class="form-group row">
        <label for="email" class="col-md-5 col-form-label" ng-class="$scope.labelColorClass">Email</label>
        <div class="col-md-7">
            <div class="input-group">
                <div class="input-group-prepend">
                    <div class="input-group-text border border-secondary text-dark bg-primary">
                        <i class="fas fa-envelope"></i>
                    </div>
                </div>
                <input ng-readonly="$scope.state == $scope.UPDATE_STATE" required pattern="^[a-zA-Z][a-zA-Z0-9_\.]{5,50}@[a-z0-9]{2,}(\.[a-z0-9]{2,4}){1,2}$" type="email" maxlength=75 class="form-control bg-dark text-light border border-secondary" name="email" ng-model="$scope.account.email">
            </div>
            <span class="text-danger" ng-show="formAccount.email.$error && formAccount.email.$dirty" ng-messages="formAccount.email.$error" role="alert">
                <span ng-message="pattern">Email không hợp lệ.</span>
                <span ng-message="required">Vui lòng nhập email.</span>
            </span>
        </div>
    </div>
    <div class="form-group row">
        <label for="gender" class="col-md-5 col-form-label" ng-class="$scope.labelColorClass">Giới tính</label>
        <div class="col-md-7">
            <div class="icheck-primary">
                <input type="checkbox" id="gender" ng-model="$scope.account.gender">
                <label ng-class="$scope.labelColorClass" for="gender">{{ $scope.account.gender ? 'Nam' : 'Nữ' }}</label>
            </div>
        </div>
    </div>
    <div class="form-group row">
        <label for="phoneNumber" class="col-md-5 col-form-label" ng-class="$scope.labelColorClass">Số điện thoại</label>
        <div class="col-md-7">
            <div class="input-group">
                <div class="input-group-prepend">
                    <div class="input-group-text border border-secondary text-dark bg-primary">
                        <i class="fas fa-phone"></i>
                    </div>
                </div>
                <input required pattern="^[0-9]+$" minlength=10 maxlength=10 type="text" class="form-control bg-dark text-light border border-secondary" name="phoneNumber" ng-model="$scope.account.phoneNumber">
            </div>
            <span class="text-danger" ng-show="formAccount.phoneNumber.$error && formAccount.phoneNumber.$dirty" ng-messages="formAccount.phoneNumber.$error" role="alert">
                <span ng-message="pattern">Số điện thoại gồm 10 chữ số.</span>
                <span ng-message="required">Vui lòng nhập số điện thoại.</span>
                <span ng-message="minlength">Vui lòng nhập số điện thoại.</span>
            </span>
        </div>
    </div>
    <div class="form-group row">
        <label for="" class="col-sm-4 col-form-label"></label>
        <div class="col-sm-8 d-flex">
            <div class="ml-auto">
                <div ng-if="$scope.state == $scope.UPDATE_STATE" ng-click="$scope.resetForm()" style="cursor: pointer;" class="btn btn-secondary text-light border border-secondary">
                    <i class="fas fa-redo-alt"></i> Khôi phục
                </div>
                <button class="btn btn-primary text-light border border-primary" type="submit"><i class="fas fa-star"></i> {{$scope.btnName}}</button>
            </div>
        </div>
    </div>
</form>

<div ng-if="$scope.state == $scope.UPDATE_STATE" class="modal fade" id="modal-change-password" style="display: none;" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content animated fadeInUp faster">
            <div class="modal-header">
                <h5 class="modal-title"><i class="fas fa-key"></i> Đổi mật khẩu</h5>
                
                <button ng-click="$scope.formChangePassword.$setPristine(); $scope.clearFormChangePassword()" type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <form novalidate name="$scope.formChangePassword" ng-submit="$scope.submitFormChangePassword()">
                <div class="modal-body">
                    <div class="form-group row">
                        <label for="oldPassword" class="col-md-5 col-form-label" ng-class="$scope.labelColorClass">Mật khẩu cũ</label>
                        <div class="col-md-7">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <div class="input-group-text border border-secondary text-dark bg-primary">
                                        <i class="fas fa-lock"></i>
                                    </div>
                                </div>
                                <input required pattern="^[a-zA-Z0-9\s\u002D\u005F]+$" minlength=5 maxlength=40 type="password" autocomplete="new-password" class="form-control bg-dark text-light border border-secondary" name="oldPassword" ng-model="$scope.oldPassword">
                            </div>
                            <span class="text-danger" ng-show="$scope.formChangePassword.oldPassword.$error && $scope.formChangePassword.oldPassword.$dirty" ng-messages="$scope.formChangePassword.oldPassword.$error" role="alert">
                                <span ng-message="pattern">Mật khẩu chỉ gồm ký tự chữ cái và -, _, dấu cách.</span>
                                <span ng-message="required">Vui lòng nhập mật khẩu cũ.</span>
                                <span ng-message="minlength">Mật khẩu ít nhất 5 đến 40 ký tự</span>
                            </span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="newPassword" class="col-md-5 col-form-label" ng-class="$scope.labelColorClass">Mật khẩu mới</label>
                        <div class="col-md-7">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <div class="input-group-text border border-secondary text-dark bg-primary">
                                        <i class="fas fa-lock"></i>
                                    </div>
                                </div>
                                <input required pattern="^[a-zA-Z0-9\s\u002D\u005F]+$" minlength=5 maxlength=40 type="password" autocomplete="newPassword" class="form-control bg-dark text-light border border-secondary" name="newPassword" ng-model="$scope.newPassword">
                            </div>
                            <span class="text-danger" ng-show="$scope.formChangePassword.newPassword.$error && $scope.formChangePassword.newPassword.$dirty" ng-messages="$scope.formChangePassword.newPassword.$error" role="alert">
                                <span ng-message="pattern">Mật khẩu chỉ gồm ký tự chữ cái và -, _, dấu cách.</span>
                                <span ng-message="required">Vui lòng nhập mật khẩu mới.</span>
                                <span ng-message="minlength">Mật khẩu ít nhất 5 đến 40 ký tự</span>
                            </span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="passwordConfirm" class="col-md-5 col-form-label" ng-class="$scope.labelColorClass">Xác nhận mật khẩu mới</label>
                        <div class="col-md-7">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <div class="input-group-text border border-secondary text-dark bg-primary">
                                        <i class="fas fa-lock"></i>
                                    </div>
                                </div>
                                <input required pattern="^[a-zA-Z0-9\s\u002D\u005F]+$" minlength=5 maxlength=40 type="password" autocomplete="new-password" class="form-control bg-dark text-light border border-secondary" compare-to="$scope.newPassword" name="passwordConfirm" ng-model="$scope.passwordConfirm">
                            </div>
                            <span class="text-danger" ng-show="$scope.formChangePassword.passwordConfirm.$error && $scope.formChangePassword.passwordConfirm.$dirty" ng-messages="$scope.formChangePassword.passwordConfirm.$error" role="alert">
                                <span ng-message="pattern">Mật khẩu chỉ gồm ký tự chữ cái và -, _, dấu cách.</span>
                                <span ng-message="required">Vui lòng nhập lại mật khẩu mới.</span>
                                <span ng-message="minlength">Mật khẩu ít nhất 5 đến 40 ký tự</span>
                                <span ng-message="compareTo">Chưa khớp mật khẩu</span>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div ng-click="$scope.formChangePassword.$setPristine(); $scope.clearFormChangePassword()" style="cursor: pointer" class="btn btn-secondary" data-dismiss="modal"><i class="fa fa-times"></i> Đóng</div>
                    <button type="submit" class="btn btn-primary"><i class="fa fa-check-square-o"></i> Hoàn tất</button>
                </div>
            </form>
        </div>
    </div>
</div>